From 2f35ba76d19e4ab0344ca6db12c221a0adcf76ef Mon Sep 17 00:00:00 2001
From: Srikanth Srungarapu <ssrungarapu@cloudera.com>
Date: Tue, 4 Mar 2014 14:19:45 -0800
Subject: [PATCH 47/73] HBASE-10639 Unload script displays wrong counts (off by one) when unloading regions

Reason: Usability bug
Author: Srikanth Srungarapu
Ref: CDH-10370
---
 bin/region_mover.rb |    4 ++--
 1 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/bin/region_mover.rb b/bin/region_mover.rb
index 80df661..b6660d0 100644
--- a/bin/region_mover.rb
+++ b/bin/region_mover.rb
@@ -358,7 +358,7 @@ def unloadRegions(options, hostname)
     server_index = 0
     while counter < rs.length do
       pool.launch(rs,counter,server_index) do |_rs,_counter,_server_index|
-        $LOG.info("Moving region " + _rs[_counter].getEncodedName() + " (" + _counter.to_s +
+        $LOG.info("Moving region " + _rs[_counter].getEncodedName() + " (" + (_counter + 1).to_s +
         " of " + _rs.length.to_s + ") to server=" + servers[_server_index] + " for " + servername)
         # Assert we can scan region in its current location
         isSuccessfulScan(admin, _rs[_counter])
@@ -426,7 +426,7 @@ def loadRegions(options, hostname)
       next
     end
     pool.launch(r,currentServer,count) do |_r,_currentServer,_count|
-      $LOG.info("Moving region " + _r.getRegionNameAsString() + " (" + _count.to_s +
+      $LOG.info("Moving region " + _r.getRegionNameAsString() + " (" + (_count + 1).to_s +
         " of " + regions.length.to_s + ") from " + _currentServer + " to server=" + 
         servername);      
       move(admin, _r, servername, _currentServer)
-- 
1.7.0.4

